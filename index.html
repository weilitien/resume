<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Wei Li Tien â€“ SDET RPG Portfolio</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #0b1120, #020617 60%);
  color: #e5e7eb;
  font-family: system-ui, sans-serif;
  display: flex;
  justify-content: center;
  padding: 1rem;
}
.shell {
  max-width: 960px;
  width: 100%;
  border: 1px solid rgba(148,163,184,.4);
  border-radius: 18px;
  padding: 1rem;
  background: #020617;
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.avatar {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  background: #f97316;
  color: #111;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}
.canvas-wrapper {
  position: relative;
  margin-top: .75rem;
}
canvas {
  width: 100%;
  background: #020617;
  border-radius: 14px;
  border: 1px solid rgba(148,163,184,.35);
  image-rendering: pixelated;
  outline: none;
}
.hud {
  position: absolute;
  bottom: .6rem;
  left: .8rem;
  right: .8rem;
  display: flex;
  justify-content: space-between;
  font-size: .75rem;
  color: #9ca3af;
  pointer-events: none;
}

/* ===== Modal ===== */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(2,6,23,.85);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 100;
}
.modal {
  background: #0f172a;
  padding: 1rem;
  border-radius: 12px;
  width: min(520px, 90%);
  border: 1px solid rgba(148,163,184,.4);
}
.modal h2 { margin-top: 0; }
.modal ul { font-size:.85rem; padding-left:1rem; }
.modal button {
  margin-top:.8rem;
  padding:.4rem .8rem;
  background:#f97316;
  border:none;
  font-weight:bold;
}
/* ===== å°æ–æ¡¿ï¼ˆå·¦ä¸‹è§’ï¼‰ ===== */
.joystick {
  display: none; /* æ‰‹æ©Ÿæ‰é¡¯ç¤ºï¼Œç”± body.touch æ§åˆ¶ */
  position: absolute;
  left: 1rem;
  bottom: 1rem;
  width: 80px;     /* å°æ–æ¡¿å¤–åœˆ */
  height: 80px;
  border-radius: 50%;
  background: radial-gradient(circle at top, rgba(15,23,42,0.9), rgba(15,23,42,0.7));
  border: 1px solid rgba(148,163,184,0.6);
  box-shadow: 0 12px 25px rgba(15,23,42,0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: none;
  z-index: 10;
}

.joystick-inner {
  width: 32px;     /* å°æ–æ¡¿å…§åœˆ */
  height: 32px;
  border-radius: 50%;
  background: radial-gradient(circle at top, rgba(249,115,22,0.9), rgba(248,250,252,0.1));
  box-shadow:
    0 8px 18px rgba(0,0,0,0.8),
    0 0 0 1px rgba(15,23,42,0.8);
  pointer-events: none;
  transform: translate(0,0);
}

/* ===== å° E æŒ‰éˆ•ï¼ˆå³ä¸‹è§’ï¼‰ ===== */
.interact-btn {
  display: none; /* æ‰‹æ©Ÿæ‰é¡¯ç¤º */
  position: absolute;
  right: 1rem;
  bottom: 1.1rem;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: radial-gradient(circle at top, #f97316, #7c2d12);
  border: 1px solid #fed7aa;
  color: #111827;
  font-weight: bold;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 10px 25px rgba(0,0,0,0.9),
    0 0 0 1px rgba(15,23,42,0.9);
  z-index: 10;
}

.interact-btn:active {
  transform: scale(0.95);
}

body.touch .joystick {
  display: flex;
}

body.touch .interact-btn {
  display: flex;
}

/* Base button style */
.modal button {
  padding: .4rem .8rem;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}

/* TxOne = é»‘è‰² */
#modal-experience button:nth-child(1) {
  background: #000000;
  color: #ffffff;
}

/* Barco = æ·±ç°è‰² */
#modal-experience button:nth-child(2) {
  background: #4b5563; /* æ·±ç°è‰² */
  color: #ffffff;
}

/* KaiOS = æ·±ç´«è‰² */
#modal-experience button:nth-child(3) {
  background: #8b5cf6; /* æ·±ç´«è‰² */
  color: #ffffff;
}



</style>
</head>

<body>

<div id="joystick" class="joystick">
    <div id="joystickInner" class="joystick-inner"></div>
</div>

<button id="btnInteract" class="interact-btn">
    <span>E</span>
</button>


<div class="shell">
  <div class="header">
    <div style="display:flex;gap:.6rem;align-items:center;">
      <div class="avatar">W</div>
      <div>
        <div>Wei Li Tien</div>
        <div style="font-size:.75rem;color:#9ca3af;">SDET Â· RPG Portfolio</div>
      </div>
    </div>
    <div>ğŸ®</div>
  </div>

  <div class="canvas-wrapper">
    <canvas id="game" width="640" height="400" tabindex="0"></canvas>
    <div class="hud">
      <span>WASD / â†‘â†“â†â†’ + E</span>
      <span id="hudHint"></span>
    </div>
  </div>
</div>

<!-- ===== Modals ===== -->
<div id="modal-about" class="modal-backdrop">
  <div class="modal">
    <h2>ğŸ‘‹ About Wei Li</h2>

    <!-- Summary -->
    <p style="font-size:0.9rem; line-height:1.6; color:#e5e7eb;">
      I am a <strong>Software Test Engineer (SDET)</strong> with
      <strong>8+ years of experience</strong> in both
      <strong>automation</strong> and <strong>manual testing</strong>
      across web, mobile, and RESTful APIs.
    </p>

    <p style="font-size:0.85rem; line-height:1.6; color:#cbd5f5;">
      Previously, I worked as a <strong>Software Engineer</strong> for
      <strong>4 years</strong>, which gives me a strong foundation in
      development and system design.  
      My focus is on ensuring product quality, optimizing testing
      processes, and delivering reliable user experiences.
    </p>

    <!-- Divider -->
    <hr style="border:0; border-top:1px solid rgba(148,163,184,.3); margin:0.8rem 0;">

    <!-- Skills -->

    
    <ul style="
      font-size:0.8rem;
      line-height:1.7;
      color:#cbd5f5;
      padding-left:1rem;
      margin:0;
    ">
  <li><strong>ğŸ§ª Automation:</strong> Pytest, Robot Framework</li>
  <li><strong>ğŸ§© Testing Platforms:</strong> Web, REST API, Windows, iOS, Android</li>
  <li><strong>âš™ï¸ CI/CD:</strong> Jenkins pipeline integration</li>
  <li><strong>ğŸ“Š Test Management:</strong> TestRail, test planning & estimation</li>
  <li><strong>ğŸ” Testing Types:</strong> Functional, Integration, Regression, Performance, Parallel testing</li>
      <!-- Certifications -->
<hr style="border:0; border-top:1px solid rgba(148,163,184,.3); margin:0.8rem 0;">

<p style="font-size:0.85rem; color:#cbd5f5; margin-bottom:0.3rem;">
  <strong>Certifications & Verifications</strong>
</p>

<ul style="
  font-size:0.8rem;
  line-height:1.6;
  color:#cbd5f5;
  padding-left:1rem;
  margin:0;
">
  <li>
    ğŸ… <a href="https://www.credly.com/badges/5b49000b-4385-45a0-8536-7d1b53c26be2?source=linked_in_profile"
         target="_blank"
         rel="noopener noreferrer"
         style="color:#38bdf8; text-decoration:none;">
      Credly Certification
    </a>
    <span style="color:#9ca3af;">(Verified Badge)</span>
  </li>
  <li>
    ğŸ§ª <a href="https://www.hackerrank.com/certificates/133237cc86f9"
         target="_blank"
         rel="noopener noreferrer"
         style="color:#38bdf8; text-decoration:none;">
      HackerRank Skill Certification
    </a>
    <span style="color:#9ca3af;">(Problem-solving & coding assessment)</span>
  </li>
</ul>

    </ul>

    <button onclick="closeAll()" style="margin-top:1rem;">Close</button>
  </div>
</div>


<div id="modal-skills" class="modal-backdrop">
  <div class="modal">
    <h2>ğŸ›  Skills Radar</h2>

    <p style="
      font-size:0.85rem;
      line-height:1.6;
      color:#cbd5f5;
      margin-bottom:0.6rem;
    ">
      A visual overview of my core SDET skills.
    </p>

    <!-- â­ Radar Chart Canvasï¼ˆæŒ‰ä¸‹ E æ‰æœƒç•«ï¼‰ -->
    <div style="
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:0.6rem;
    ">
      <canvas
        id="skillsRadar"
        width="200"
        height="200"
        style="
          background:#020617;
          border-radius:12px;
          border:1px solid rgba(148,163,184,.4);
        "
      ></canvas>

 
    </div>

    <button onclick="closeAll()" style="margin-top:1rem;">Close</button>
  </div>
</div>


<!-- Experience -->

<div id="modal-experience" class="modal-backdrop">
  <div class="modal">
   <h2>ğŸ’¼ Experience</h2>
   <div style="display:flex; flex-direction:column; gap:0.4rem;">
  <button onclick="openExperience('txone')">TxOne Networks</button>
  <button onclick="openExperience('barco')">Barco</button>
  <button onclick="openExperience('kaios')">KaiOS</button>
</div>
<button onclick="closeAll()" style="margin-top:0.8rem;">Close</button>

  </div>
</div>

<!-- TxOne Networks -->
<div id="modal-txone" class="modal-backdrop">
  <div class="modal">
    <h2>TxOne Networks</h2>

    <!-- Role -->
    <p style="font-size:0.85rem; color:#e5e7eb; margin-bottom:0.4rem;">
      <strong>Role:</strong> Sr. Software Engineer in Test (SDET)
    </p>

    <!-- Key Projects -->
    <div style="margin-bottom:0.6rem;">
      <p style="font-size:0.85rem; color:#cbd5f5; margin-bottom:0.3rem;">
        <strong>Key Projects</strong>
      </p>

      <ul style="
        font-size:0.8rem;
        line-height:1.6;
        color:#cbd5f5;
        padding-left:1rem;
        margin:0;
      ">
        <!-- Project 1 -->
        <li>
          <strong>PIT 594 Legacy System</strong>
          <ul>
            <li>
              Designed and developed a <strong>C++ compiler-based executable</strong>
              to perform scheduled pattern updates on
              <strong>Windows 2000</strong> and <strong>Windows XP</strong>.
            </li>
            <li>
              Integrated a <strong>mail server</strong> to automatically verify
              update results and generate execution reports.
            </li>
          </ul>
        </li>

        <!-- Project 2 -->
        <li style="margin-top:0.4rem;">
          <strong>BVT / Smoke Test Automation Pipeline</strong>
          <ul>
            <li>
              Built and automated the <strong>Build Verification Test (BVT)</strong>
              process with comprehensive smoke tests.
            </li>
            <li>
              Implemented automation to retrieve <strong>OVA files from NAS</strong>,
              compare <strong>vCenter versions</strong>, and
              convert <strong>OVA images into virtual machines</strong>.
            </li>
            <li>
              Executed <strong>WebUI</strong> and <strong>RESTful API</strong>
              smoke tests to validate core functionalities.
            </li>
            <li>
              Automatically triggered <strong>regression testing</strong>
              once the build passed BVT validation.
            </li>
          </ul>
        </li>
      </ul>
      
    </div>

    <!-- Additional -->
    <ul style="
      font-size:0.8rem;
      line-height:1.6;
      color:#cbd5f5;
      padding-left:1rem;
      margin-top:0.4rem;
    ">
      <li>
        Maintained and operated <strong>VMware-based test laboratories</strong>.
      </li>
      <li>
        CI/CD for pipeline <strong>OVA converter & Smoke tests & Regression tests</strong>.
      </li>
      
    </ul>

    <button onclick="openModal('modal-experience')" style="margin-top:1rem;">
      Back
    </button>
  </div>
</div>


<!-- Barco -->

<div id="modal-barco" class="modal-backdrop">
  <div class="modal">
    <h2>Barco</h2>

    <!-- Role -->
    <p style="font-size:0.85rem; color:#e5e7eb; margin-bottom:0.4rem;">
      <strong>Role:</strong> Sr. Software Test Engineer
    </p>

    <!-- Key Projects -->
    <div style="margin-bottom:0.6rem;">
      <p style="font-size:0.85rem; color:#cbd5f5; margin-bottom:0.3rem;">
        <strong>Key Projects</strong>
      </p>

      <ul style="
        font-size:0.8rem;
        line-height:1.6;
        color:#cbd5f5;
        padding-left:1rem;
        margin:0;
      ">
        <!-- Project 1 -->
        <li>
          <strong>Automation Framework Bootstrap</strong>
          <ul>
            <li>
              Built an <strong>end-to-end automated testing framework</strong>
              from scratch using <strong>Pytest</strong> and
              <strong>PyAutoGUI</strong> for smoke testing.
            </li>
            <li>
              Enabled automated validation for critical user workflows,
              reducing reliance on repetitive manual testing.
            </li>
          </ul>
        </li>

        <!-- Project 2 -->
        <li style="margin-top:0.4rem;">
          <strong>Scrum Tester Lead</strong>
          <ul>
            <li>
              Led an <strong>external testing team</strong> and coordinated
              daily testing activities within an agile (Scrum) environment.
            </li>
            <li>
              Defined <strong>test plans</strong>, test scenarios,
              and acceptance criteria to ensure delivery quality.
            </li>
          </ul>
        </li>

        <!-- Project 3 -->
        <li style="margin-top:0.4rem;">
          <strong>Windows Application Testing â€“ ClickShare</strong>
          <ul>
            <li>
              Conducted in-depth testing of a <strong>Windows desktop application</strong>,
              focusing on system-level interactions.
            </li>
            <li>
              Monitored <strong>Windows Event Viewer</strong> to analyze
              application behavior, system events, and integration issues.
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <button onclick="openModal('modal-experience')" style="margin-top:1rem;">
      Back
    </button>
  </div>
</div>

<!-- KaiOS -->

<div id="modal-kaios" class="modal-backdrop">
  <div class="modal">
    <h2>KaiOS</h2>

    <!-- Role -->
    <p style="font-size:0.85rem; color:#e5e7eb; margin-bottom:0.4rem;">
      <strong>Role:</strong> Backend Automation Test Engineer
    </p>

    <!-- Key Projects -->
    <div style="margin-bottom:0.6rem;">
      <p style="font-size:0.85rem; color:#cbd5f5; margin-bottom:0.3rem;">
        <strong>Key Projects</strong>
      </p>

      <ul style="
        font-size:0.8rem;
        line-height:1.6;
        color:#cbd5f5;
        padding-left:1rem;
        margin:0;
      ">
        <!-- Project 1 -->
        <li>
          <strong>Account Platform</strong>
          <ul>
            <li>
              Tested a <strong>centralized account management system</strong>,
              similar to an <strong>App Storeâ€“style personal account platform</strong>.
            </li>
            <li>
              Designed and executed <strong>RESTful API test scenarios</strong>,
              covering <strong>SMTP email activation</strong>,
              <strong>OTP verification</strong>, and
              <strong>session timeout handling</strong>.
            </li>
            <li>
              Ensured account security and reliability by validating
              authentication flows and edge cases.
            </li>
          </ul>
        </li>

        <!-- Project 2 -->
        <li style="margin-top:0.4rem;">
          <strong>Device Financier</strong>
          <ul>
            <li>
              Tested a <strong>device-centric financing service</strong>
              with <strong>real-time communication</strong> via
              <strong>WebSocket servers</strong>.
            </li>
            <li>
              Verified the complete workflow starting from
              <strong>RESTful API handshake</strong> to
              <strong>SMS-based confirmation</strong> on physical devices.
            </li>
            <li>
              Utilized an <strong>SMS notification server</strong> as a
              reliable assertion mechanism to validate device-side behaviors.
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <button onclick="openModal('modal-experience')" style="margin-top:1rem;">
      Back
    </button>
  </div>
</div>




<div id="modal-contact" class="modal-backdrop">
  <div class="modal">
    <h2>ğŸ“¬ Contact</h2>

    <p>Email: <strong>godlisi@hotmail.com</strong></p>

    <p style="margin-top:0.6rem;">
      <strong>LinkedIn:</strong><br>
      <a 
        href="https://www.linkedin.com/in/wei-li-tien-3a5345105/" 
        target="_blank" 
        rel="noopener noreferrer"
        style="color:#38bdf8; text-decoration:none; font-weight:bold;"
      >
        ğŸ”— View my LinkedIn Profile
      </a>
    </p>

    <button onclick="closeAll()" style="margin-top:1rem;">Close</button>
  </div>
</div>


<script>
/* ===== Game ===== */
let tick = 0;


function drawSkillsRadar() {
  const radar = document.getElementById("skillsRadar");
  if (!radar) return;

  const rctx = radar.getContext("2d");

  const W = radar.width;
  const H = radar.height;
  const cx = W / 2;
  const cy = H / 2;

  const maxR = 60;
  const levels = 5;

  const skills = [
    { name: "Automation", value: 5 },
    { name: "CI/CD", value: 4 },
    { name: "RESTful API", value: 5 },
    { name: "AI-assisted", value: 3 },
    { name: "Mobile", value: 2.5 }
    
  ];

  const n = skills.length;
  const angleStep = (Math.PI * 2) / n;

  /* ===== æ¸…ç©º + ç§»åˆ°ä¸­å¿ƒï¼ˆéå¸¸é‡è¦ï¼‰===== */
  rctx.clearRect(0, 0, W, H);
  rctx.setTransform(1, 0, 0, 1, 0, 0);
  rctx.translate(cx, cy);

  /* ===== 1ï¸âƒ£ èƒŒæ™¯ç¶²æ ¼ ===== */
  for (let lvl = 1; lvl <= levels; lvl++) {
    const r = (maxR / levels) * lvl;
    rctx.beginPath();
    for (let i = 0; i < n; i++) {
      const a = -Math.PI / 2 + angleStep * i;
      const x = Math.cos(a) * r;
      const y = Math.sin(a) * r;
      i === 0 ? rctx.moveTo(x, y) : rctx.lineTo(x, y);
    }
    rctx.closePath();
    rctx.strokeStyle = "rgba(148,163,184,0.4)";
    rctx.stroke();
  }

  /* ===== 2ï¸âƒ£ è»¸ç·š ===== */
  for (let i = 0; i < n; i++) {
    const a = -Math.PI / 2 + angleStep * i;
    rctx.beginPath();
    rctx.moveTo(0, 0);
    rctx.lineTo(Math.cos(a) * maxR, Math.sin(a) * maxR);
    rctx.strokeStyle = "rgba(51,65,85,0.8)";
    rctx.stroke();
  }

  /* =================================================
     â­â­â­ 3ï¸âƒ£ å¤–åœæŠ€èƒ½æ¨™ç±¤ï¼ˆä½ å•çš„é€™æ®µï¼Œå°±æ”¾é€™è£¡ï¼‰
     ================================================= */
  rctx.font = "11px system-ui";
  rctx.fillStyle = "#e5e7eb";
  rctx.textBaseline = "middle";

  for (let i = 0; i < n; i++) {
    const angle = -Math.PI / 2 + angleStep * i;
    const labelR = maxR + 10;

    const lx = Math.cos(angle) * labelR;
    const ly = Math.sin(angle) * labelR;

    if (angle > Math.PI / 2 || angle < -Math.PI / 2) {
      rctx.textAlign = "right";
    } else if (angle > -Math.PI / 2 && angle < Math.PI / 2) {
      rctx.textAlign = "left";
    } else {
      rctx.textAlign = "center";
    }

    rctx.fillText(skills[i].name, lx, ly);
  }

  /* ===== 4ï¸âƒ£ èƒ½åŠ›å€¼å¤šé‚Šå½¢ ===== */
  rctx.beginPath();
  for (let i = 0; i < n; i++) {
    const r = maxR * (skills[i].value / levels);
    const a = -Math.PI / 2 + angleStep * i;
    const x = Math.cos(a) * r;
    const y = Math.sin(a) * r;
    i === 0 ? rctx.moveTo(x, y) : rctx.lineTo(x, y);
  }
  rctx.closePath();
  rctx.fillStyle = "rgba(249,115,22,0.25)";
  rctx.strokeStyle = "#f97316";
  rctx.lineWidth = 2;
  rctx.fill();
  rctx.stroke();

  /* ===== reset transformï¼ˆå¾ˆé‡è¦ï¼‰===== */
  rctx.setTransform(1, 0, 0, 1, 0, 0);
}



const btnInteract = document.getElementById("btnInteract");

btnInteract.addEventListener("touchstart", e => {
  e.preventDefault();
  if (nearObject) {
    openModal(nearObject.modal);
  }
}, { passive: false });


let joystickActive = false;
let joyVec = { x: 0, y: 0 };
const maxRadius = 30;  // èˆ‡ CSS æ­é…çš„å°æ–æ¡¿åŠå¾‘



joystick.addEventListener("touchmove", e=>{
  e.preventDefault();
  handleJoystick(e);
}, {passive:false});



const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.focus();

const hudHint = document.getElementById("hudHint");

const player = { x:320, y:200, speed:2.4 };
const INTERACT_RADIUS = 80;

const objects = [
  { id:"about", label:"About", x:100, y:80, modal:"modal-about", kind:"sign" },
  { id:"skills", label:"Skills", x:480, y:80, modal:"modal-skills", kind:"tree" },
  { id:"experience", label:"Experience", x:100, y:280, modal:"modal-experience", kind:"rack" },
  { id:"contact", label:"Contact", x:480, y:280, modal:"modal-contact", kind:"mail" }
];

let nearObject = null;
const keys = new Set();



window.addEventListener("keydown", e => {
  keys.add(e.key);

  const isInteractKey =
    e.key === "e" ||
    e.key === "E" ||
    e.key === "Enter";

  if (isInteractKey && nearObject) {
    e.preventDefault(); // é¿å… Enter å½±éŸ¿å…¶ä»– UI
    openModal(nearObject.modal);
  }
});


window.addEventListener("keyup", e=>keys.delete(e.key));

/* ===== æ–æ¡¿é‚è¼¯ ===== */
function handleJoystick(ev) {
  const touch = ev.touches[0];
  if (!touch) return;

  const rect = joystick.getBoundingClientRect();
  const cx = rect.left + rect.width / 2;
  const cy = rect.top + rect.height / 2;

  const dx = touch.clientX - cx;
  const dy = touch.clientY - cy;

  const dist = Math.min(Math.hypot(dx, dy), maxRadius);
  const nx = dx / (Math.hypot(dx, dy) || 1);
  const ny = dy / (Math.hypot(dx, dy) || 1);

  joystickActive = true;
  joyVec = { x: nx, y: ny };

  joystickInner.style.transform = `translate(${nx * dist * 0.5}px, ${ny * dist * 0.5}px)`;
}

function resetJoystick() {
  joystickActive = false;
  joyVec = { x: 0, y: 0 };
  joystickInner.style.transform = "translate(0,0)";
}

joystick.addEventListener("touchstart", e => {
  e.preventDefault();
  handleJoystick(e);
}, { passive: false });

joystick.addEventListener("touchmove", e => {
  e.preventDefault();
  handleJoystick(e);
}, { passive: false });

joystick.addEventListener("touchend", resetJoystick);
joystick.addEventListener("touchcancel", resetJoystick);



function update(){


let dx = 0, dy = 0;

  if (keys.has("w") || keys.has("ArrowUp")) dy--;
  if (keys.has("s") || keys.has("ArrowDown")) dy++;
  if (keys.has("a") || keys.has("ArrowLeft")) dx--;
  if (keys.has("d") || keys.has("ArrowRight")) dx++;

  /* â­ æ–æ¡¿å‘é‡åŠ å…¥ç§»å‹• â­ */
  if (joystickActive) {
    dx += joyVec.x;
    dy += joyVec.y;
  }

  if(dx||dy){
    const l=Math.hypot(dx,dy)||1;
    player.x+=dx/l*player.speed;
    player.y+=dy/l*player.speed;
  }

  nearObject=null;
  for(const o of objects){
    if(Math.hypot(player.x-(o.x+20),player.y-(o.y+20))<INTERACT_RADIUS){
      nearObject=o; break;
    }
  }
  hudHint.textContent = nearObject ? `${nearObject.label} Â· Press E` : "";
}

function drawMap(){
  ctx.fillStyle="#020617";
  ctx.fillRect(0,0,640,400);
  ctx.strokeStyle="rgba(30,41,59,.4)";
  for(let x=0;x<=640;x+=32){ ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,400);ctx.stroke();}
  for(let y=0;y<=400;y+=32){ ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(640,y);ctx.stroke();}
}



function drawObject(o){
  const isNear = (nearObject && nearObject.id === o.id);

  ctx.save();

  /* ===== ç™¼å…‰æ•ˆæœ ===== */
  if (isNear) {
    const pulse = 2 + Math.sin(tick * 0.1) * 2;
    ctx.shadowColor = "rgba(249,115,22,0.9)";
    ctx.shadowBlur = 10 + pulse;
    ctx.lineWidth = 2;
  }

  /* ===== Icon drawing ===== */
if (o.kind === "sign") { // About
  const cx = o.x + 20;

  // ç«‹æŸ±
  ctx.fillStyle = "#78350f";
  ctx.fillRect(cx - 2, o.y + 18, 4, 20);

  // ç‰Œå­
  ctx.save();
  ctx.translate(cx, o.y + 18);
  ctx.rotate(-0.05); // å¾®å‚¾æ–œ
  ctx.fillStyle = "#ca8a04";
  ctx.fillRect(-22, -10, 44, 16);
  ctx.restore();

  ctx.fillStyle = "#0f172a";
  ctx.font = "10px system-ui";
  ctx.textAlign = "center";
  ctx.fillText("About", cx, o.y + 20);
}


 if (o.kind === "tree") { // Skills
  const cx = o.x + 20;
  const base = o.y + 40;

  // ğŸŒ¬ æ¨¹å† æ“ºå‹•ï¼ˆå¾ˆè¼•å¾®ï¼‰
  const sway = Math.sin(tick * 0.05) * 2;

  // æ¨¹å¹¹
  ctx.fillStyle = "#713f12";
  ctx.fillRect(cx - 4, base - 16, 8, 18);

  // æ¨¹å† ï¼ˆä¸‰å±¤ï¼‰
  ctx.fillStyle = "#22c55e";
  ctx.beginPath();
  ctx.arc(cx + sway, base - 24, 14, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "#16a34a";
  ctx.beginPath();
  ctx.arc(cx + sway * 0.6, base - 34, 12, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = "#15803d";
  ctx.beginPath();
  ctx.arc(cx + sway * 0.3, base - 44, 10, 0, Math.PI * 2);
  ctx.fill();
}


if (o.kind === "rack") { // Experience
  const glow = 0.5 + Math.sin(tick * 0.1) * 0.5;

  ctx.strokeStyle = "#f97316";
  ctx.lineWidth = 2;
  ctx.strokeRect(o.x + 6, o.y + 6, 28, 28);

  // å…§éƒ¨ç‡ˆè™Ÿ
  ctx.fillStyle = `rgba(249,115,22,${0.3 + glow})`;
  ctx.fillRect(o.x + 10, o.y + 12, 20, 4);
  ctx.fillRect(o.x + 10, o.y + 20, 20, 4);
}


if (o.kind === "mail") { // Contact
  const cx = o.x + 20;

  // ä¿¡ç®±æœ¬é«”
  ctx.fillStyle = "#a855f7";
  ctx.fillRect(cx - 10, o.y + 16, 20, 12);

  // è“‹å­
  ctx.strokeStyle = "#fff";
  ctx.beginPath();
  ctx.moveTo(cx - 10, o.y + 16);
  ctx.lineTo(cx, o.y + 22);
  ctx.lineTo(cx + 10, o.y + 16);
  ctx.stroke();
}

if (o.kind === "mail") { // Contact
  const cx = o.x + 20;
  const s = 1.2;

  /* --- ä¿¡ç®±æœ¬é«” --- */
  ctx.fillStyle = "#a855f7";
  ctx.fillRect(cx - 10 * s, o.y + 16 * s, 20 * s, 12 * s);

  /* --- ä¿¡ç®±è“‹å­ --- */
  ctx.strokeStyle = "#fff";
  ctx.beginPath();
  ctx.moveTo(cx - 10 * s, o.y + 16 * s);
  ctx.lineTo(cx,            o.y + 22 * s);
  ctx.lineTo(cx + 10 * s, o.y + 16 * s);
  ctx.stroke();

  /* --- æ°£æ³¡æ–‡å­— Contact me!ï¼ˆåªåœ¨é è¿‘æ™‚é¡¯ç¤ºï¼‰ --- */
  if (isNear) {
    const bubbleW = 80;
    const bubbleH = 20;

    // æ°£æ³¡æ¡†èƒŒæ™¯
    ctx.fillStyle = "rgba(15, 23, 42, 0.85)"; // æ·±è‰²åŠé€æ˜
    ctx.strokeStyle = "rgba(255,255,255,0.3)";

    ctx.beginPath();
    ctx.roundRect(
      cx - bubbleW / 2,
      o.y - 28,
      bubbleW,
      bubbleH,
      6
    );
    ctx.fill();
    ctx.stroke();

    // æ°£æ³¡æ–‡å­—
    ctx.fillStyle = "#e5e7eb";
    ctx.font = "10px system-ui";
    ctx.textAlign = "center";
    ctx.fillText("Contact me!", cx, o.y - 14);
  }
}






  /* ===== Label + E hint (ONLY when near) ===== */
  if (isNear) {
    ctx.shadowBlur = 0;

    // Label background
    ctx.fillStyle = "rgba(2,6,23,0.75)";
    ctx.fillRect(o.x - 10, o.y - 24, 80, 16);

    // Label text
    ctx.fillStyle = "#e5e7eb";
    ctx.font = "10px system-ui";
    ctx.textAlign = "center";
    ctx.fillText(o.label, o.x + 20, o.y - 12);

    // E hint
    ctx.fillStyle = "#f97316";
    ctx.font = "bold 12px system-ui";
    ctx.fillText("E", o.x + 20, o.y - 36);
  }

  ctx.restore();
}




function drawPlayer() {
  const x = player.x;
  const y = player.y;

  const s = 1.2; // scale 1.2x

  // head
  ctx.fillStyle = "#facc99";
  ctx.fillRect(x - 6 * s, y - 16 * s, 12 * s, 6 * s);

  // eyes
  ctx.fillStyle = "#111827";
  ctx.fillRect(x - 4 * s, y - 14 * s, 2 * s, 2 * s);
  ctx.fillRect(x + 2 * s, y - 14 * s, 2 * s, 2 * s);

  // body
  ctx.fillStyle = "#1e293b";
  ctx.fillRect(x - 7 * s, y - 10 * s, 14 * s, 10 * s);

  // legs
  ctx.fillStyle = "#0f172a";
  ctx.fillRect(x - 5 * s, y - 2 * s, 4 * s, 6 * s);
  ctx.fillRect(x + 1 * s, y - 2 * s, 4 * s, 6 * s);



  // name tag
  ctx.font="10px system-ui";
  ctx.textAlign="center";
  ctx.fillStyle="rgba(0,0,0,.6)";
  ctx.fillRect(x-55,y-36,110,14);
  ctx.fillStyle="#e5e7eb";
  ctx.fillText("ğŸ‘‹ Hi, I'm Wei Li Tien",x,y-24);
}


function loop(){
    tick++;
  update();
  drawMap();
  objects.forEach(drawObject);
  drawPlayer();
  requestAnimationFrame(loop);
}
loop();

/* ===== Modal helpers ===== */
function openModal(id){
  closeAll();
  const el = document.getElementById(id);
  if (!el) return;

  el.style.display = "flex";

  // â­ åªæœ‰ Skills æ‰ç•« Radar Chart
  if (id === "modal-skills") {
    setTimeout(drawSkillsRadar, 0);
  }
}




function closeAll(){
  document.querySelectorAll(".modal-backdrop").forEach(m=>m.style.display="none");
}
function openExperience(company) {
  openModal(`modal-${company}`);
}

</script>
</body>
</html>
