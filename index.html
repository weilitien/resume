<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wei Li Tien ‚Äì SDET RPG Map Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #020617;
      --panel: #020617;
      --accent: #f97316;
      --accent-soft: rgba(249, 115, 22, 0.2);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.35);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #0b1120, #020617 60%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem 0.75rem;
      touch-action: none;
    }

    .shell {
      width: 100%;
      max-width: 960px;
      background: radial-gradient(circle at top left, #111827, #020617 60%);
      border-radius: 20px;
      padding: 1.1rem 1.3rem;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow:
        0 25px 50px rgba(15,23,42,0.95),
        0 0 0 1px rgba(148,163,184,0.4);
    }

    header.header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.75rem;
    }

    .header-main {
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .avatar {
      width: 34px;
      height: 34px;
      border-radius: 11px;
      background: radial-gradient(circle at top, #f97316, #7c2d12);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #111827;
      font-weight: bold;
      font-size: 1rem;
      box-shadow: 0 12px 30px rgba(15,23,42,0.9);
    }

    .header-text { display: flex; flex-direction: column; }
    .header-title { font-size: 1rem; font-weight: 600; }
    .header-sub { font-size: 0.75rem; color: #9ca3af; }

    .header-pill {
      padding: 0.2rem 0.6rem;
      font-size: 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(249,115,22,0.6);
      background: rgba(15,23,42,0.85);
      color: #fed7aa;
    }

    .panel {
      display: grid;
      grid-template-columns: minmax(0,1.5fr) minmax(0,1.1fr);
      gap: 1rem;
    }

    @media (max-width: 820px) {
      .panel { grid-template-columns: 1fr; }
    }

    .canvas-wrapper {
      position: relative;
      background: radial-gradient(circle at top, #0b1120, #020617 65%);
      border-radius: 16px;
      padding: 0.75rem;
      border: 1px solid rgba(30,64,175,0.5);
      box-shadow:
        inset 0 0 0 1px rgba(15,23,42,0.7),
        0 18px 40px rgba(15,23,42,0.95);
    }

    canvas {
      width: 100%;
      height: auto;
      background: #020617;
      border-radius: 12px;
      image-rendering: pixelated;
    }

    /* ===== Â∞èËôõÊì¨ÊêñÊ°ø ===== */

    body.touch .joystick,
    body.touch .interact-btn {
      display: flex;
    }

    .joystick {
      display: none;
      position: absolute;
      left: 1rem;
      bottom: 1rem;
      width: 80px;
      height: 80px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.9), rgba(15,23,42,0.7));
      border: 1px solid rgba(148,163,184,0.6);
      box-shadow: 0 12px 25px rgba(15,23,42,0.9);
      align-items: center;
      justify-content: center;
      touch-action: none;
      z-index: 10;
    }

    .joystick-inner {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(249,115,22,0.9), rgba(248,250,252,0.1));
      box-shadow:
        0 8px 18px rgba(0,0,0,0.8),
        0 0 0 1px rgba(15,23,42,0.8);
      transform: translate(0,0);
      pointer-events: none;
    }

    /* ===== Â∞è E ÊåâÈàï ===== */

    .interact-btn {
      display: none;
      position: absolute;
      right: 1rem;
      bottom: 1.1rem;
      width: 42px;
      height: 42px;
      border-radius: 999px;
      background: radial-gradient(circle at top, #f97316, #7c2d12);
      box-shadow:
        0 10px 25px rgba(0,0,0,0.9),
        0 0 0 1px rgba(15,23,42,0.9);
      border: 1px solid #fed7aa;
      align-items: center;
      justify-content: center;
      color: #111827;
      font-size: 1rem;
      font-weight: bold;
      z-index: 10;
    }

    .interact-btn:active {
      transform: translateY(1px) scale(0.96);
    }

    /* HUD */
    .hud {
      position: absolute;
      left: 0.9rem;
      bottom: 0.6rem;
      right: 0.9rem;
      font-size: 0.75rem;
      color: #94a3b8;
      display: flex;
      justify-content: space-between;
      pointer-events: none;
    }

    .key {
      display: inline-flex;
      width: 18px;
      height: 18px;
      font-size: 0.6rem;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      border: 1px solid rgba(148,163,184,0.8);
    }

  </style>
</head>

<body>
  <!-- ÂÆπÂô® -->
  <div class="shell">

    <header class="header">
      <div class="header-main">
        <div class="avatar">W</div>
        <div class="header-text">
          <div class="header-title">Wei Li Tien</div>
          <div class="header-sub">SDET ¬∑ Interactive RPG Portfolio</div>
        </div>
      </div>
      <div class="header-pill">RPG Demo üéÆ</div>
    </header>

    <div class="panel">

      <div class="canvas-wrapper">
        <canvas id="game" width="640" height="400"></canvas>

        <div class="hud">
          <span><strong>Controls:</strong> WASD / ‚Üë‚Üì‚Üê‚Üí + E</span>
          <span id="hudHint"></span>
        </div>

        <!-- Â∞èÊêñÊ°ø -->
        <div id="joystick" class="joystick">
          <div id="joystickInner" class="joystick-inner"></div>
        </div>

        <!-- Â∞è E ÊåâÈàï -->
        <button id="btnInteract" class="interact-btn"><span>E</span></button>
      </div>


      <!-- ========= Aside / Ë™™ÊòéÊ¨Ñ ========= -->
      <aside class="info-panel">
        <div style="margin-bottom:0.4rem;">
          <div style="font-size:0.9rem;font-weight:600;">SDET World Map</div>
          <p style="font-size:0.8rem;color:#9ca3af;margin-top:0.2rem;">
            Walk around this small RPG world. Each object represents an area:
            <strong>Signpost ‚Üí About</strong>,
            <strong>Tree ‚Üí Skills</strong>,
            <strong>Server Rack ‚Üí Projects</strong>,
            <strong>Mailbox ‚Üí Contact</strong>.
          </p>
        </div>

        <div style="margin-top:0.5rem;">
          <div style="font-weight:600;font-size:0.85rem;">Legend</div>
          <ul style="font-size:0.78rem;color:#9ca3af;margin-top:0.2rem;line-height:1.35;">
            <li>ü™ß Signpost ‚Üí About Me</li>
            <li>üå≥ Skill Tree ‚Üí Skills</li>
            <li>üñ•Ô∏è Server Rack ‚Üí Projects</li>
            <li>üìÆ Mailbox ‚Üí Contact</li>
          </ul>
        </div>

        <div style="margin-top:0.5rem;">
          <p style="font-size:0.8rem;color:#9ca3af;">
            Built with HTML5 Canvas + vanilla JavaScript.  
            This is a lightweight, interactive portfolio.
          </p>
        </div>
      </aside>

    </div> <!-- panel -->
  </div> <!-- shell -->

  <!-- ========= Modal: About ========= -->
  <div class="modal-backdrop" id="modal-about" style="
    position:fixed;inset:0;background:rgba(15,23,42,0.85);
    display:none;align-items:center;justify-content:center;z-index:40;">
    <div class="modal" style="
      width:min(520px,90%);background:#0f172a;padding:1rem;border-radius:12px;
      border:1px solid rgba(148,163,184,0.4);">
      <h2 style="margin:0;font-size:1rem;">ü™ß About Me</h2>
      <p style="font-size:0.8rem;color:#9ca3af;margin-top:0.5rem;">
        I‚Äôm <strong>Wei Li Tien</strong>, an SDET focusing on automation,
        regression pipelines, test infrastructure, and AI-assisted testing.
      </p>
      <p style="font-size:0.8rem;color:#9ca3af;margin-top:0.4rem;">
        I build automated smoke tests, regression suites, VMware/vCenter workflows,
        Jenkins pipelines, Allure reporting, and AI-generated test case systems.
      </p>
      <button data-close style="
        margin-top:1rem;padding:0.35rem 0.9rem;border-radius:6px;
        background:#f97316;border:none;color:#111827;font-weight:bold;">
        Close
      </button>
    </div>
  </div>

  <!-- ========= Modal: Skills ========= -->
  <div class="modal-backdrop" id="modal-skills" style="
    position:fixed;inset:0;background:rgba(15,23,42,0.85);
    display:none;align-items:center;justify-content:center;z-index:40;">
    <div class="modal" style="
      width:min(520px,90%);background:#0f172a;padding:1rem;border-radius:12px;
      border:1px solid rgba(148,163,184,0.4);">
      <h2 style="margin:0;font-size:1rem;">üå≥ Skills</h2>

      <h3 style="margin-top:0.8rem;font-size:0.85rem;color:#e5e7eb;">Automation</h3>
      <ul style="font-size:0.8rem;color:#9ca3af;margin-left:1rem;">
        <li>Python test automation</li>
        <li>pytest + Allure</li>
        <li>Multi-VM agent test flows</li>
      </ul>

      <h3 style="margin-top:0.8rem;font-size:0.85rem;color:#e5e7eb;">CI/CD</h3>
      <ul style="font-size:0.8rem;color:#9ca3af;margin-left:1rem;">
        <li>Jenkins pipelines</li>
        <li>HTML regression reports</li>
        <li>Teams webhook notifications</li>
      </ul>

      <h3 style="margin-top:0.8rem;font-size:0.85rem;color:#e5e7eb;">AI-assisted Testing</h3>
      <ul style="font-size:0.8rem;color:#9ca3af;margin-left:1rem;">
        <li>AI-generated test case templates</li>
        <li>LLM-guided debugging</li>
      </ul>

      <button data-close style="
        margin-top:1rem;padding:0.35rem 0.9rem;border-radius:6px;
        background:#f97316;border:none;color:#111827;font-weight:bold;">
        Close
      </button>
    </div>
  </div>

  <!-- ========= Modal: Projects ========= -->
  <div class="modal-backdrop" id="modal-projects" style="
    position:fixed;inset:0;background:rgba(15,23,42,0.85);
    display:none;align-items:center;justify-content:center;z-index:40;">
    <div class="modal" style="
      width:min(520px,90%);background:#0f172a;padding:1rem;border-radius:12px;
      border:1px solid rgba(148,163,184,0.4);">
      <h2 style="margin:0;font-size:1rem;">üñ•Ô∏è Projects</h2>

      <h3 style="margin-top:0.8rem;font-size:0.85rem;color:#e5e7eb;">
        Regression Automation Pipeline
      </h3>
      <p style="font-size:0.8rem;color:#9ca3af;">
        Multi-VM orchestration: install agents, disable RTS, run smoke tests,
        generate Allure reports and push results to Teams.
      </p>

      <h3 style="margin-top:0.8rem;font-size:0.85rem;color:#e5e7eb;">
        Template-driven AI Test Generator
      </h3>
      <p style="font-size:0.8rem;color:#9ca3af;">
        AI-generated test cases from templates (positive, negative, boundary).
      </p>

      <button data-close style="
        margin-top:1rem;padding:0.35rem 0.9rem;border-radius:6px;
        background:#f97316;border:none;color:#111827;font-weight:bold;">
        Close
      </button>
    </div>
  </div>

  <!-- ========= Modal: Contact ========= -->
  <div class="modal-backdrop" id="modal-contact" style="
    position:fixed;inset:0;background:rgba(15,23,42,0.85);
    display:none;align-items:center;justify-content:center;z-index:40;">
    <div class="modal" style="
      width:min(520px,90%);background:#0f172a;padding:1rem;border-radius:12px;
      border:1px solid rgba(148,163,184,0.4);">
      <h2 style="margin:0;font-size:1rem;">üìÆ Contact</h2>
      <p style="font-size:0.8rem;color:#9ca3af;margin-top:0.5rem;">
        Email: <strong>godlisi@hotmail.com</strong>
      </p>

      <button data-close style="
        margin-top:1rem;padding:0.35rem 0.9rem;border-radius:6px;
        background:#f97316;border:none;color:#111827;font-weight:bold;">
        Close
      </button>
    </div>
  </div>


  <!-- ========= JavaScriptÔºàCanvas + ÁßªÂãï + ÊêñÊ°ø + ModalÔºâ ========= -->
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const WIDTH = canvas.width;
    const HEIGHT = canvas.height;

    const TILE = 32;

    const hudHint = document.getElementById("hudHint");

    // Áé©ÂÆ∂
    const player = {
      x: WIDTH / 2,
      y: HEIGHT / 2,
      speed: 2,
      dir: "down",
      moving: false,
      frame: 0,
      frameTimer: 0,
      frameInterval: 180,
    };

    // ÂõõÂÄã‰∫íÂãïÁâ©‰ª∂
    const objects = [
      { id:"about",    kind:"sign",    x:110,        y:80,         w:60, h:60, modal:"modal-about",    label:"About" },
      { id:"skills",   kind:"tree",    x:WIDTH-170,  y:70,         w:70, h:90, modal:"modal-skills",   label:"Skills" },
      { id:"projects", kind:"rack",    x:110,        y:HEIGHT-150, w:80, h:90, modal:"modal-projects", label:"Projects" },
      { id:"contact",  kind:"mailbox", x:WIDTH-160,  y:HEIGHT-140, w:50, h:70, modal:"modal-contact",  label:"Contact" }
    ];

    const keys = new Set();
    let nearObj = null;

    // ========= PC ÈçµÁõ§ =========
    window.addEventListener("keydown", e => {
      keys.add(e.key);
      if (e.key === "e" || e.key==="E") openIfNear();
    });

    window.addEventListener("keyup", e => keys.delete(e.key));

    function openIfNear(){
      if (nearObj) openModal(nearObj.modal);
    }

    function anyModalOpen() {
      return document.querySelector(".modal-backdrop[style*='display: flex']") !== null;
    }

    // ========= Áï´Âú∞ÂúñËÉåÊôØ =========
    function drawMap() {
      ctx.fillStyle = "#020617";
      ctx.fillRect(0,0,WIDTH,HEIGHT);

      ctx.strokeStyle="rgba(30,41,59,0.4)";
      for(let x=0;x<=WIDTH;x+=TILE){
        ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,HEIGHT); ctx.stroke();
      }
      for(let y=0;y<=HEIGHT;y+=TILE){
        ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(WIDTH,y); ctx.stroke();
      }
    }

    // ========= ÂêÑÁâ©‰ª∂Áπ™Ë£Ω =========
    function drawObject(o){
      ctx.save();

      if (o.kind === "sign"){
        const cx = o.x + o.w/2;

        ctx.fillStyle="#ca8a04";
        ctx.fillRect(cx-28, o.y+10, 56, 16);
        ctx.strokeStyle="#111";
        ctx.strokeRect(cx-28, o.y+10, 56,16);

        ctx.fillStyle="#111827";
        ctx.font="10px monospace";
        ctx.textAlign="center";
        ctx.fillText("About", cx, o.y+22);

      } else if (o.kind === "tree"){
        const cx = o.x + o.w/2;
        const base = o.y + o.h;

        ctx.fillStyle="#713f12";
        ctx.fillRect(cx-8, base-40,16,32);

        ctx.fillStyle="#22c55e";
        ctx.beginPath();
        ctx.arc(cx, base-55, 25,0,Math.PI*2);
        ctx.fill();

        ctx.fillStyle="rgba(2,2,2,0.9)";
        ctx.fillRect(cx-26, base-12,52,14);
        ctx.strokeStyle="#94a3b8";
        ctx.strokeRect(cx-26, base-12,52,14);
        ctx.fillStyle="#e5e7eb";
        ctx.font="10px monospace";
        ctx.textAlign="center";
        ctx.fillText("Skills", cx, base-2);

      } else if (o.kind === "rack"){
        const x = o.x+10, y=o.y+10, w=o.w-20, h=o.h-20;

        ctx.fillStyle="#111827";
        ctx.fillRect(x,y,w,h);
        ctx.strokeStyle="#f97316";
        ctx.strokeRect(x,y,w,h);

        for(let i=0;i<3;i++){
          const ry=y+8+i*16;
          ctx.fillStyle="#1e293b";
          ctx.fillRect(x+6, ry, w-12, 10);
        }

        ctx.fillStyle="rgba(2,2,2,0.9)";
        ctx.fillRect(x+w/2-30, y+h+2, 60, 14);
        ctx.fillStyle="#e5e7eb";
        ctx.font="10px monospace";
        ctx.textAlign="center";
        ctx.fillText("Projects", x+w/2, y+h+12);

      } else if (o.kind === "mailbox"){
        const cx = o.x + o.w/2;
        const base = o.y + o.h;

        ctx.fillStyle="#6b21a8";
        ctx.fillRect(cx-12, base-45, 24, 18);

        ctx.fillStyle="#1e293b";
        ctx.fillRect(cx-26, base-12, 52, 14);
        ctx.strokeStyle="#94a3b8";
        ctx.strokeRect(cx-26, base-12, 52,14);
        ctx.fillStyle="#e5e7eb";
        ctx.font="10px monospace";
        ctx.textAlign="center";
        ctx.fillText("Contact", cx, base-2);
      }

      ctx.restore();
    }

    // ========= Áé©ÂÆ∂Áπ™Ë£ΩÔºàÁ∞°ÊòìÂÉèÁ¥†È¢®Ôºâ =========
    function drawPlayer(){
      const px = player.x, py = player.y;

      ctx.fillStyle="#facc99";
      ctx.fillRect(px-6, py-14, 12, 12);

      ctx.fillStyle="#111";
      if (player.dir==="left") ctx.fillRect(px-4, py-10, 2,2);
      else if (player.dir==="right") ctx.fillRect(px+2, py-10, 2,2);
      else {
        ctx.fillRect(px-4, py-10, 2,2);
        ctx.fillRect(px+2, py-10, 2,2);
      }

      ctx.fillStyle="#334155";
      ctx.fillRect(px-7, py-2, 14, 14);
    }

    // ========= Êõ¥Êñ∞Áé©ÂÆ∂‰ΩçÁΩÆ =========
    function update(dt){
      if (anyModalOpen()) {
        player.moving = false;
        return;
      }

      let dx=0, dy=0;

      if (keys.has("ArrowUp") || keys.has("w")) dy -= 1;
      if (keys.has("ArrowDown") || keys.has("s")) dy += 1;
      if (keys.has("ArrowLeft") || keys.has("a")) dx -= 1;
      if (keys.has("ArrowRight") || keys.has("d")) dx += 1;

      // ÊêñÊ°øÂä†Êàê
      if (joystickActive) {
        dx += joyVec.x;
        dy += joyVec.y;
      }

      if (dx!==0 || dy!==0){
        const len = Math.hypot(dx,dy) || 1;
        dx/=len; dy/=len;

        player.x += dx*player.speed;
        player.y += dy*player.speed;

        if (Math.abs(dx) > Math.abs(dy))
          player.dir = dx>0 ? "right":"left";
        else
          player.dir = dy>0 ? "down":"up";

        player.moving = true;
      } else {
        player.moving = false;
      }

      // ÈÇäÁïå
      player.x = Math.max(20, Math.min(WIDTH-20, player.x));
      player.y = Math.max(20, Math.min(HEIGHT-20, player.y));

      // ‰∫íÂãïÁâ©‰ª∂ÂÅµÊ∏¨
      nearObj = null;
      for(const o of objects){
        const cx = o.x + o.w/2;
        const cy = o.y + o.h/2;
        const dist = Math.hypot(player.x-cx, player.y-cy);
        if(dist < 60){
          nearObj = o;
          hudHint.textContent = `E ‚Üí ${o.label}`;
          return;
        }
      }
      hudHint.textContent="";
    }

    // ========= ‰∏ªËø¥Âúà =========
    let last=0;
    function loop(t){
      const dt = t-last;
      last=t;
      update(dt);
      drawMap();
      objects.forEach(drawObject);
      drawPlayer();
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);

    // ========= Modal ÈñãÈóú =========
    function openModal(id){
      const el = document.getElementById(id);
      if (!el) return;
      el.style.display="flex";
    }
    function closeAll(){
      document.querySelectorAll(".modal-backdrop").forEach(m=>m.style.display="none");
    }
    document.querySelectorAll("[data-close]").forEach(btn=>{
      btn.addEventListener("click", closeAll);
    });

    // ÈªûËÉåÊôØÈóúÈñâ
    document.querySelectorAll(".modal-backdrop").forEach(back=>{
      back.addEventListener("click", e=>{
        if(e.target === back) closeAll();
      });
    });

    // ========= ÊâãÊ©üÊêñÊ°øÈÇèËºØ =========
    const isTouch = "ontouchstart" in window;
    if (isTouch) document.body.classList.add("touch");

    const joystick = document.getElementById("joystick");
    const joyInner = document.getElementById("joystickInner");
    const btnInteract = document.getElementById("btnInteract");

    let joystickActive = false;
    let joyVec = {x:0, y:0};

    const maxRadius = 30;  // üî• ÊêñÊ°øÁ∏ÆÂ∞èÂæåÁöÑÊúÄ‰Ω≥ÂçäÂæë

    function handleJoystick(ev){
      const touch = ev.touches[0];
      if(!touch) return;

      const rect = joystick.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;

      const dx = touch.clientX - cx;
      const dy = touch.clientY - cy;

      const dist = Math.min(Math.hypot(dx,dy), maxRadius);
      const nx = dx / (dist || 1);
      const ny = dy / (dist || 1);

      joystickActive = true;
      joyVec = {x:nx, y:ny};

      joyInner.style.transform = `translate(${nx*dist/2}px, ${ny*dist/2}px)`;
    }

    function resetJoystick(){
      joystickActive=false;
      joyVec={x:0,y:0};
      joyInner.style.transform="translate(0,0)";
    }

    joystick.addEventListener("touchstart", e=>{e.preventDefault(); handleJoystick(e);}, {passive:false});
    joystick.addEventListener("touchmove",  e=>{e.preventDefault(); handleJoystick(e);}, {passive:false});
    joystick.addEventListener("touchend",   ()=> resetJoystick());
    joystick.addEventListener("touchcancel",()=> resetJoystick());

    // E ÊåâÈàïÔºàÊâãÊ©üÔºâ
    btnInteract.addEventListener("touchstart", e=>{
      e.preventDefault();
      openIfNear();
    }, {passive:false});

  </script>

</body>
</html>
